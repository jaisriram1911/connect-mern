{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport { useState, useEffect } from 'react';\nimport { getCookie, isAuth } from '../../actions/auth';\nimport { list, removeBlog } from '../../actions/blogAction';\nimport moment from 'moment';\nimport './BlogRead.css';\n\nvar BlogRead = function BlogRead(_ref) {\n  var username = _ref.username;\n\n  var _useState = useState([]),\n      blogs = _useState[0],\n      setBlogs = _useState[1];\n\n  var _useState2 = useState(''),\n      message = _useState2[0],\n      setMessage = _useState2[1];\n\n  var token = getCookie('token');\n  useEffect(function () {\n    loadBlogs();\n  }, []);\n\n  var loadBlogs = function loadBlogs() {\n    list(username).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setBlogs(data);\n      }\n    });\n  };\n\n  var deleteBlog = function deleteBlog(slug) {\n    removeBlog(slug, token).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setMessage(data.message);\n        loadBlogs();\n      }\n    });\n  };\n\n  var handleDelete = function handleDelete(slug) {\n    var answer = window.confirm('Are you sure that you want to delete your Blog?');\n\n    if (answer) {\n      deleteBlog(slug);\n    }\n  };\n\n  var showBlogs = function showBlogs() {\n    return blogs.map(function (blog, i) {\n      return __jsx(\"div\", {\n        key: i,\n        className: \"blog_read_box\"\n      }, __jsx(Link, {\n        href: \"/blogs/\".concat(blog.slug)\n      }, __jsx(\"a\", null, __jsx(\"h5\", {\n        className: \"mb-3\",\n        style: {\n          cursor: 'pointer'\n        }\n      }, blog.title))), __jsx(\"div\", {\n        className: \"blog_read_created_by-flex\"\n      }, __jsx(\"p\", {\n        className: \"blog_read_written_by\"\n      }, \" Written By \", __jsx(Link, {\n        href: \"/\"\n      }, __jsx(\"a\", null, blog.postedBy.name)), \" | \", moment(blog.updatedAt).format(\"ll\")), __jsx(\"div\", {\n        className: \"blog_read_ud-flex\"\n      }, __jsx(\"h6\", {\n        style: {\n          cursor: 'pointer'\n        },\n        onClick: function onClick() {\n          return handleDelete(blog.slug);\n        }\n      }, __jsx(\"i\", {\n        \"class\": \"fas fa-trash-alt\"\n      }), \" Delete\"), showUpdateButton(blog))));\n    });\n  };\n\n  var showUpdateButton = function showUpdateButton(blog) {\n    if (isAuth() && isAuth().role === 0) {\n      return __jsx(\"a\", {\n        style: {\n          cursor: 'pointer'\n        },\n        href: \"/user/crud/\".concat(blog.slug)\n      }, __jsx(\"h6\", {\n        className: \"ml-3\"\n      }, __jsx(\"i\", {\n        \"class\": \"fas fa-pen\"\n      }), \" Update\"));\n    } else if (isAuth() && isAuth().role === 1) {\n      return __jsx(Link, {\n        href: \"/admin/crud/\".concat(blog.slug)\n      }, __jsx(\"h6\", {\n        style: {\n          cursor: 'pointer'\n        },\n        className: \"ml-3\"\n      }, __jsx(\"i\", {\n        \"class\": \"fas fa-pen\"\n      }), \" Update\"));\n    }\n  };\n\n  return __jsx(React.Fragment, null, message && __jsx(\"div\", {\n    className: \"alert alert-warning\"\n  }, message), showBlogs());\n};\n\nexport default BlogRead;","map":null,"metadata":{},"sourceType":"module"}