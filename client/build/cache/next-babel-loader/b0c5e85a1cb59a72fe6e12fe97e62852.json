{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport { withRouter } from 'next/router';\nimport Layout from '../components/Layout';\nimport { useState } from 'react';\nimport { listBlog } from '../actions/blogAction';\nimport Card from '../components/blog/Card';\nimport { DOMAIN } from '../config';\n\nvar Blogs = function Blogs(_ref) {\n  var blogs = _ref.blogs,\n      categories = _ref.categories,\n      tags = _ref.tags,\n      blogLimit = _ref.blogLimit,\n      blogSkip = _ref.blogSkip,\n      totalBlog = _ref.totalBlog,\n      router = _ref.router;\n\n  var head = function head() {\n    return __jsx(Head, null, __jsx(\"title\", null, \"Connect\"), __jsx(\"meta\", {\n      name: \"description\",\n      content: \"Programing Blog by jaisriram\"\n    }), __jsx(\"link\", {\n      rel: \"canonical\",\n      href: \"\".concat(DOMAIN).concat(router.pathname)\n    }), __jsx(\"meta\", {\n      property: \"og:title\",\n      content: \"Blog App | Latest Web development Blog\"\n    }), __jsx(\"meta\", {\n      property: \"og:description\",\n      content: \"Programing Blog by jaisriram\"\n    }), __jsx(\"meta\", {\n      property: \"og:type\",\n      content: \"website\"\n    }), __jsx(\"meta\", {\n      property: \"og:url\",\n      content: \"\".concat(DOMAIN).concat(router.pathname)\n    }), __jsx(\"meta\", {\n      property: \"og:image\",\n      content: \"\".concat(DOMAIN, \"/static/images/blogimage.jpg\")\n    }), __jsx(\"meta\", {\n      property: \"og:site_name\",\n      content: \"Blog App\"\n    }), __jsx(\"meta\", {\n      property: \"og:image:secure_url\",\n      content: \"\".concat(DOMAIN, \"/static/images/blogimage.jpg\")\n    }), __jsx(\"meta\", {\n      property: \"og:image:type\",\n      content: \"image/jpg\"\n    }));\n  };\n\n  var _useState = useState(blogLimit),\n      limit = _useState[0],\n      setLimit = _useState[1];\n\n  var _useState2 = useState(0),\n      skip = _useState2[0],\n      setSkip = _useState2[1];\n\n  var _useState3 = useState(totalBlog),\n      size = _useState3[0],\n      setSize = _useState3[1];\n\n  var _useState4 = useState([]),\n      loadedBlog = _useState4[0],\n      setLoadedBlog = _useState4[1];\n\n  var loadMore = function loadMore() {\n    var toSkip = skip + limit;\n    listBlog(toSkip, limit).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setLoadedBlog([].concat(_toConsumableArray(loadedBlog), _toConsumableArray(data.blogs)));\n        setSize(data.size);\n        setSkip(toSkip);\n      }\n    });\n  };\n\n  var loadButton = function loadButton() {\n    return size > 0 && size >= limit && __jsx(\"button\", {\n      onClick: loadMore,\n      className: \"btn btn-primary\"\n    }, \"Load More\");\n  };\n\n  var ShowLoadedBlogs = function ShowLoadedBlogs() {\n    return loadedBlog.map(function (blog, i) {\n      return __jsx(\"article\", {\n        key: i\n      }, __jsx(Card, {\n        blog: blog\n      }), __jsx(\"hr\", null));\n    });\n  };\n\n  var showAllBlogs = function showAllBlogs() {\n    return blogs.map(function (blog, i) {\n      return __jsx(\"article\", {\n        key: i\n      }, __jsx(Card, {\n        blog: blog\n      }));\n    });\n  };\n\n  var showAllCategories = function showAllCategories() {\n    return categories.map(function (c, i) {\n      return __jsx(Link, {\n        className: \"category-nav-items\",\n        href: \"/categories/\".concat(c.slug)\n      }, __jsx(\"a\", {\n        className: \"btn btn-primary btn-sm mr-1 ml-1 mt-3\"\n      }, c.name));\n    });\n  };\n\n  return __jsx(React.Fragment, null, head(), __jsx(Layout, null, __jsx(\"main\", null, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"header\", null, __jsx(\"div\", {\n    className: \"col-md-12 pt-3\"\n  }, __jsx(\"h1\", {\n    className: \"display-5 mt-5 mb-5 font-weight-bold text-center\",\n    style: {\n      color: '#363636'\n    }\n  }, \"Programming Blog\", __jsx(\"div\", null, showAllCategories()))))), __jsx(\"div\", {\n    className: \"container\"\n  }, showAllBlogs()), __jsx(\"div\", {\n    className: \"container\"\n  }, ShowLoadedBlogs()), __jsx(\"div\", {\n    className: \"text-center pt-5 pb-5\"\n  }, loadButton()))));\n};\n\nBlogs.getInitialProps = function () {\n  var limit = 6;\n  var skip = 0;\n  return listBlog(skip, limit).then(function (data) {\n    if (data.error) {\n      console.log(data.error);\n    } else {\n      return {\n        blogs: data.blogs,\n        categories: data.categories,\n        tags: data.tags,\n        blogLimit: limit,\n        blogSkip: skip,\n        totalBlog: data.size\n      };\n    }\n  });\n};\n\nexport default withRouter(Blogs);","map":null,"metadata":{},"sourceType":"module"}